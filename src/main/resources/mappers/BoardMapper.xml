<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.security.board.dao.BoardDao">

    <!-- List<BoardVO> getBoardList();-->
    <select id="getBoardList" resultType="com.example.security.board.vo.BoardVO">
        SELECT P.*,M.*
        FROM POSTS P
        JOIN MEMBERS M ON P.MEMBER_NO = M.MEMBER_NO
    </select>

    <!-- BoardVO getBoardById(int id);-->
    <select id="getBoardById" parameterType="int" resultType="com.example.security.board.vo.BoardVO">
        SELECT P.TITLE, P.CONTENT, P.CREATED_AT, P.POST_NO, M.MEMBER_NM
        FROM POSTS P
        JOIN MEMBERS M ON P.MEMBER_NO = M.MEMBER_NO
        WHERE 1=1
        AND P.POST_NO = #{id}
    </select>

    <!-- void insertPost(BoardVO board);-->
    <insert id="insertPost" parameterType="com.example.security.board.vo.BoardVO" useGeneratedKeys="true" keyProperty="postNo">
        INSERT INTO
        POSTS
        (TITLE,CONTENT,CREATED_AT,MEMBER_NO)
        VALUES
        (#{title},#{content},NOW(),#{memberNo})
    </insert>


</mapper>